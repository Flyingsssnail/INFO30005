

<div id="page-nav">
    <!--    if there's no existing comment page, still display 1-->
    <% if (total < 1) { %>
        <a href="/forum/post?postid=<%= post._id %>?page=1">1</a>
    <% } %>

    <!--    if less than 9 comment pages, only display existing pages-->
    <% if (total < 9 * 9) {%>
        <% for (var i=1; i <= (total / 9 + total % 9); i++) { %>
            <a href="/forum/post?postid=<%= post._id %>?page=<%= i %>">i</a>
        <% } %>
    <% } %>

    <!--    if more than 9 comment pages, it depends on-->
    <% if (total > 9 * 9) { %>
        <% for (var i=1; i <= (total / 9 + total % 9); i++) { %>
            <!--    before 5 pages, display 1 to 9-->
            <% if (currentpage < 5) { %>
                <a href="/forum/post?postid=<%= post._id %>?page=<%= i %>">i</a>
            <% } %>
            <!--    after 5 pages, display 4 pages before and after-->
            <% if (currentpage >= 5) { %>
                <% var j = i - 4; %>
                <a href="/forum/post?postid=<%= post._id %>?page=<%= j %>">j</a>
            <% } %>
        <% } %>
    <% } %>
</div>