

<div id="page-nav">
    <!--    if there's no existing comment page, still display 1-->
    <% if (post.reply.length < 1) { %>
        <a href="/forum/post?postid=<%= post._id %>?page=1">1</a>
    <% } %>

    <!--    if less than 9 comment pages, only display existing pages-->
    <% if (post.reply.length < 9 * 9) {%>
        <% for (var i=1; i <= (post.reply.length > 9 ? post.reply.length % 9 : 1); i++) { %>
            <% console.log(post.reply.length / 9) %>
            <div>
                <a href="/forum/post?postid=<%= post._id %>?page=<%= i %>"><%= i %></a>
            </div>
        <% } %>
    <% } %>

    <!--    if more than 9 comment pages, it depends on-->
    <% if (post.reply.length > 9 * 9) { %>
        <% for (var i=1; i <= (post.reply.length % 9); i++) { %>
            <!--    before 5 pages, display 1 to 9-->
            <% if (currentpage < 5) { %>
                <a href="/forum/post?postid=<%= post._id %>?page=<%= i %>"><%= i %></a>
            <% } %>
            <!--    after 5 pages, display 4 pages before and after-->
            <% if (currentpage >= 5) { %>
                <% var j = i - 4; %>
                <a href="/forum/post?postid=<%= post._id %>?page=<%= j %>"><%= j %></a>
            <% } %>
        <% } %>
    <% } %>
</div>